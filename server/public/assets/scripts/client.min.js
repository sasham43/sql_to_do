/*! weekend_to_do 2016-04-25 */
$(function(){function a(){$.ajax({url:"/tasks",method:"GET"}).done(function(a){console.log("ajax get response:",a),taskList=a,console.log("taskList",taskList),taskDisplay=b(taskList),$(".taskContainer").html(taskDisplay)}).fail(function(a){console.log("ajax get call failed",a)})}function b(a){console.log("list",a);var b="";return a.map(function(a){var c="",d="",e="";a.completed?(c="disabled",e="taskItem disabled"):e="taskItem",b=b+'<li class="'+e+'"><button id="completeID'+a.id+'" class="btn completeButton"'+c+' aria-label="Completed"><span class="glyphicon glyphicon-ok" aria-hidden="true"></span></button><button id="removeID'+a.id+'" class="btn removeButton"'+d+' aria-label="Remove"><span class="glyphicon glyphicon-remove" aria-hidden="true"></span></button>'+a.name+"</li>"}),b}function c(a){var b=a.attr("id").match(/\d/g),c="";return b.length>1?b.map(function(a){c+=a}):c=b,c}$("#addTask").on("click",function(b){b.preventDefault();var c=$("#taskInput").val(),d={name:c,completed:!1};$.ajax({url:"/tasks",method:"POST",data:d}).done(function(b){console.log("ajax call response:",b),a(),$("#taskInput").val("")}).fail(function(a){console.log("ajax call response fail:",a)})}),$(document).on("click",".completeButton",function(){console.log("completeButton this",$(this).attr("id"));var b=c($(this));console.log("taskID",b),$.ajax({url:"/tasks/"+b,method:"PUT"}).done(function(b){console.log("ajax put call worked",b),a()}).fail(function(a){console.log("ajax put call failed",a)})}),$(document).on("click",".removeButton",function(){var b=c($(this));$.ajax({url:"/tasks/"+b,method:"DELETE"}).done(function(b){console.log("ajax delete call worked",b),a()}).fail(function(a){console.log("ajax put call failed",a)})}),a()});